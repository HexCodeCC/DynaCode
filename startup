local tWidth, tHeight = term.getSize()
local logging = true

shell.run("dobuild.lua", "/src", "bin/DynaCode.lua")
dofile("bin/DynaCode.lua")

if logging then
    if not log then error("DynaCode Logger not available.", 0) end

    log:setLoggingEnabled( true )
    log:setLoggingPath("DynaCode.log")
end

app = Application( term.getSize() )
app.backgroundColour = colors.cyan

stage = app + Stage({
    name = "TestStage";
    X = 5;
    Y = 5;
    width = 15;
    height = 7;
    textColour = colors.lightGray;
    titleTextColour = colors.white;
    titleBackgroundColour = 128;
    backgroundColour = colors.white;
    shadowColour = colors.gray;
    shadow = true;
    title = "Test Window"
})

stage2 = app + Stage({
    name = "TestStage2";
    X = 17;
    Y = 2;
    width = 15;
    height = 7;
    textColour = colors.lightGray;
    titleTextColour = colors.white;
    titleBackgroundColour = 128;
    backgroundColour = colors.white;
    shadowColour = colors.gray;
    shadow = true;
    title = "Another Window"
})

label = stage + Label("Hello World!", 3, 1)
input = stage + Input( 3, 2, 11, 1 )


app.hotkey:registerCombination("stop", "shift-ctrl-q", function()
    app:finish()
    print("Finished")
end)

app:registerDaemon(MyDaemon("MyDaemon"))
app:removeDaemon("MyDaemon")


app:run( function()
    sleep(1) -- trigger timer event
    error("Oh snap")
end )
