shell.run("dobuild.lua", "/src", "bin/DynaCode.lua")
dofile("bin/DynaCode.lua")

log:setEnabled( true )
log:setPath("DynaCode.log")

app = Application( term.getSize() )

window = app + Stage( 2, 2, 20, 9 )

main = Template("mainPage", window)
window.activeTemplate = main

inp = main + TextContainer([[The TextContainer will  @tc-red d @tc-green e @tc-blue v @tc-orange e @tc-lime l @tc-purple o @tc-cyan p @tc-grey  scrollbars when required which can help when viewing text in large volume.]], 1, 1, 15, 8)
inp:createAnchor {
    right = 1,
    bottom = 1,
    top = 1,
    left = 1
}
inp.textColor = colours.grey

app:createHotkey("close", "ctrl-b", function()
    app:stop()
end)

app:appendStagesFromDCML("stages.dcml")
window2 = app:getStage("MainStage")

local container = window2.activeTemplate
local outer = container:getNode("outer")
local inner = outer:getNode("inner")

window2:addToController("hey", function( self )
    window2.activeTemplate = "SecondaryTemplate"
end)
window2:addToController("close", function( self )
    window2:close()
end)

outer:createAnchor {
    right = 1,
    bottom = 1,
    top = 1,
    left = 1
}

inner:createAnchor {
    right = 1,
    bottom = 1,
    top = 1,
    left = 1
}

app:start()
